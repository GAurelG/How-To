<h1>Some indications on how to administer personal servers:</h1>

<h2>APACHE config:</h2>

<h2>OpenSSL:</h2>

<ol>
<li><p>To create a self signed OpenSSL certificate see Digital Ocean how to.
I enabeled the a2enmod mode for Apache:</p>

<p><code>sudo a2enmod ssl</code></p>

<p>then restart Apache</p></li>
<li><p>Create a new key and self signed certificate:</p>

<p><code>sudo openssl req -X509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/apache2/ssl/apache.key -out /etc/apache2/ssl/apache.crt</code></p>

<ul>
<li><strong>openssl</strong>: commande for openssl</li>
<li><strong>req</strong>: This specifies a subcommand for X.509 certificate signing request (CSR) management. X.509 is a public key infrastructure standard that SSL adheres to for its key and certificate managment. Since we are wanting to create a new X.509 certificate, this is what we want.req: </li>
<li><strong>x509</strong>:  This option specifies that we want to make a self-signed certificate file instead of generating a certificate request.</li>
<li><strong>nodes</strong>: This option tells OpenSSL that we do not wish to secure our key file with a passphrase. Having a password protected key file would get in the way of Apache starting automatically as we would have to enter the password every time the service restarts.</li>
<li><strong>days 365</strong>: specify validity lenght of the certificate</li>
<li><strong>newkey rsa:2048</strong>: This option will create the certificate request and a new private key at the same time. This is necessary since we didn't create a private key in advance. The rsa:2048 tells OpenSSL to generate an RSA key that is 2048 bits long.</li>
<li><strong>keyout</strong>: This parameter names the output file for the private key file that is being created.</li>
<li><strong>out</strong>: This option names the output file for the certificate that we are generating.</li>
</ul>

<p>We placed the certificate in <strong><em><code>/etc/apche2/ssl/apache.crt</code></em></strong>
We placed the private key in <strong><em><code>/etc/apache2/ssl/apache.key</code></em></strong></p></li>
<li><p>Then configure apache2 (change stuffs in the file <code>/etc/apache2/sites-available/default-ssl.conf</code>)</p></li>
</ol>

<h3>Renew Self Signed Certificate:</h3>

<ol>
<li><p>We will use the old key (for now located in /etc/apache2/ssl/apache.key)
and replace the apache.crt file with our new key, then restart apache</p></li>
<li><p>Create new certificate with existing key:</p>

<p><code>openssl req -key *domain.key* -new -x509 -days 365 -out *domain.crt*</code></p>

<p>change domaine.key and domain.crt to the key and certificate i want.</p></li>
<li><p>restart apache (<code>sudo service apache2 restart</code> on ubuntu 14.04)  </p></li>
</ol>

<p>Next is the link to a really good openSSL cheatsheet:
<a href="https://www.digitalocean.com/community/tutorials/openssl-essentials-working-with-ssl-certificates-private-keys-and-csrs">openSSL cheatsheet</a></p>
